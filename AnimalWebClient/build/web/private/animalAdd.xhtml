<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <h:head>
        <title>Egyed felvétele</title>
    </h:head>
    <h:body>
        <link type="text/css" rel="stylesheet" href="../resources/css/animal.css?v=${applicationInfoBean.projectVersion}" />
        
        <div class="content">
            <f:metadata>
                <f:viewAction action="#{loginController.checkLogin('animalAdd.xhtml',3)}" />
            </f:metadata>

            <ui:include src="navigationbar.xhtml" />
            
            <div class="content-block">
            <h:form id="addAnimal">
                <table>
                    <tbody>
                        <tr id="animal_add" class="animal_add">
                            <th colspan="5" style="border: solid thin;">Az egyed adatai</th>
                        </tr>
                        <tr id="animal_add" class="animal_add">
                            <td>Egyed azonosítója:</td>
                            <td>
                                <h:message for="animal_id" style="color:red" />
                                <h:inputText id="animal_id" label="Azonosító" requiredMessage="A mező kitöltése kötelező!" a:placeholder="Azonosító" required="false" value="#{animalController.newAnimal.earTag}">
                                    <f:ajax execute = "animal_id" render = "animal_id" />
                                </h:inputText>
                            </td>
                        </tr>
                        <tr id="animal_add" class="animal_add">
                            <td>Egyed neve:</td>
                            <td>
                                <h:message for="animal_name" style="color:red" />
                                <h:inputText id="animal_name" label="Neve" requiredMessage="A mező kitöltése kötelező!" a:placeholder="Neve" required="false" value="#{animalController.newAnimal.name}">
                                    <f:ajax execute = "animal_name" render = "animal_name" />
                                </h:inputText>
                            </td>
                        </tr>
                        <tr id="animal_add" class="animal_add">
                            <td>Születési dátum:</td>
                            <td>
                                <h:inputText id="birthdate" a:type="date" value="#{animalController.newAnimal.birthdateString}">
                                    <f:ajax execute = "birthdate" render = "birthdate" />
                                </h:inputText>
                            </td>
                        </tr>
                        <tr id="animal_add" class="animal_add">
                            <td>Neme:</td>
                            <td>
                                <h:selectOneMenu id="sex" styleClass="selectonemenu" value="#{animalController.newAnimal.sex}">
                                    <f:selectItem itemLabel = "Kérlek válassz!" />
                                    <f:selectItem itemValue = "true" itemLabel = "Hímivarú" /> 
                                    <f:selectItem itemValue = "false" itemLabel = "Nőivarú" />
                                    <f:ajax execute = "sex" render = "sex" />
                                </h:selectOneMenu>
                            </td>
                        </tr>
                        <tr id="animal_add" class="animal_add">
                            <td>Egyed faj:</td>
                            <td>
                                <h:selectOneMenu id="species" styleClass="selectonemenu" value="#{animalController.newAnimal.speciesId}">
                                    <f:selectItem itemLabel = "Kérlek válassz!" />
                                    <f:selectItems value="#{animalController.allSpecies}" var="sp"
                                                   itemLabel="#{sp.name}" itemValue="#{sp.id}" />
                                    <f:ajax execute = "species" render = "species" />
                                </h:selectOneMenu>
                            </td>
                        </tr>
                        <tr id="animal_add" class="animal_add">
                            <td>Egyed fajta:</td>
                            <td>
                                <h:selectOneMenu id="breed" styleClass="selectonemenu" value="#{animalController.newAnimal.breedId}">
                                    <f:selectItem itemLabel = "Kérlek válassz!" />
                                    <f:selectItems value="#{animalController.allBreed}" var="br"
                                                   itemLabel="#{br.name}" itemValue="#{br.id}" />
                                    <f:ajax execute = "breed" render = "breed" />
                                </h:selectOneMenu>
                            </td>
                        </tr>
                        <tr id="animal_add" class="animal_add">
                            <td>Egyed színe:</td>
                            <td>
                                <h:selectOneMenu id="color" styleClass="selectonemenu" value="#{animalController.newAnimal.colorId}">
                                    <f:selectItem itemLabel = "Kérlek válassz!" />
                                    <f:selectItems value="#{animalController.allColor}" var="cr"
                                                   itemLabel="#{cr.name}" itemValue="#{cr.id}" />
                                    <f:ajax execute = "color" render = "color" />
                                </h:selectOneMenu>
                            </td>
                        </tr>
                        <tr id="animal_add" class="animal_add">
                            <td>Tenyészetkód:</td>
                            <td>
                                <h:message for="breedingHasAnimal_id_00" style="color:red" />
                                <h:inputText id="breedingHasAnimal_id_00" label="Azonosító" requiredMessage="A mező kitöltése kötelező!" a:placeholder="Azonosító" required="false" value="#{animalController.newBreedingHasAnimal.get(0).breedingId}">
                                    <f:ajax execute = "breedingHasAnimal_id_00" render = "breedingHasAnimal_id_00" />
                                </h:inputText>
                            </td>
                        </tr>
                        <tr id="animal_add" class="animal_add">
                            <td>Tenyészetbe érkezés dátuma:</td>
                            <td>
                               <h:inputText id="breedingHasAnimal_startDate_00" a:type="date" value="#{animalController.newBreedingHasAnimal.get(0).startDateString}">
                                    <f:ajax execute = "breedingHasAnimal_startDate_00" render = "breedingHasAnimal_startDate_00" />
                                </h:inputText>
                            </td>
                        </tr>
                        
                        <tr id="animal_add" class="animal_add">
                            <th colspan="5" style="border: solid thin;">Az ellés adatai</th>
                        </tr>
                        <tr id="animal_add" class="animal_add">
                            <td>Anya(recipiens) azonosítója:</td>
                            <td>
                                <h:message for="mother_id" style="color:red" />
                                <h:inputText id="mother_id" label="Azonosító" requiredMessage="A mező kitöltése kötelező!" a:placeholder="Azonosító" required="false" value="#{animalController.newAnimal.motherId}">
                                    <f:ajax execute = "mother_id" render = "mother_id" />
                                </h:inputText>
                            </td>
                        </tr>
                        <tr id="animal_add" class="animal_add">
                            <td>Ikerellés:</td>
                            <td>
                                <h:selectOneMenu id="twinning" styleClass="selectonemenu" value="#{animalController.newAnimal.twinning}">
                                    <f:selectItem itemLabel = "Kérlek válassz!" />
                                    <f:selectItem itemValue = "false" itemLabel = "Nem" /> 
                                    <f:selectItem itemValue = "true" itemLabel = "Igen" /> 
                                    <f:ajax execute = "twinning" render = "twinning" />
                                </h:selectOneMenu>
                            </td>
                        </tr>
                        <tr id="animal_add" class="animal_add">
                            <td>Ellés módja:</td>
                            <td>
                                <h:selectOneMenu id="calving" styleClass="selectonemenu" value="#{animalController.newAnimal.colorId}">
                                    <f:selectItem itemLabel = "Kérlek válassz!" />
                                    <f:selectItems value="#{animalController.allCalving}" var="cv"
                                                   itemLabel="#{cv.name}" itemValue="#{cv.id}" />
                                    <f:ajax execute = "calving" render = "calving " />
                                </h:selectOneMenu>
                            </td>
                        </tr>
                        <tr id="animal_add" class="animal_add">
                            <td>Borjú tömege (kg):</td>
                            <td>
                                <h:message for="calving_weight" style="color:red" />
                                <h:inputText id="calving_weight" label="Tömeg" requiredMessage="A mező kitöltése kötelező!" a:placeholder="Tömeg" required="false" value="#{animalController.newAnimal.calvingWeight}">
                                    <f:ajax execute = "calving_weight" render = "calving_weight" />
                                </h:inputText>
                            </td>
                        </tr>
                    </tbody>
                </table>
                
                <table>
                    <tbody>
                        <tr id="animal_add" class="animal_add">
                            <th colspan="4" style="border: solid thin;">Az egyed előző tenyészetei</th>
                        </tr>
                        <tr>
                            <th>Tenyészetkód:</th>
                            <th>Bekerülés dátuma:</th>
                            <th>Kikerülés dátuma:</th>
                            <th></th>
                        </tr>
                        
                        <c:forEach items="#{animalController.newBreedingHasAnimal}" var="breedingHasAnimal" varStatus="loop">
                            <c:if test="#{loop.index > 0}" >
                            <tr id="animal_add" class="animal_add">
                            <td>
                                <h:message for="breedingHasAnimal_id_#{loop.index}" style="color:red" />
                                <h:inputText id="breedingHasAnimal_id_#{loop.index}" label="Azonosító" requiredMessage="A mező kitöltése kötelező!" a:placeholder="Azonosító" required="false" value="#{breedingHasAnimal.breedingId}">
                                    <f:ajax execute = "breedingHasAnimal_id_#{loop.index}" render = "breedingHasAnimal_id_#{loop.index}" />
                                </h:inputText>
                            </td>
                            
                            <td>
                                <h:inputText id="breedingHasAnimal_startDate_#{loop.index}" a:type="date" value="#{breedingHasAnimal.startDateString}">
                                    <f:ajax execute = "breedingHasAnimal_startDate_#{loop.index}" render = "breedingHasAnimal_startDate_#{loop.index}" />
                                </h:inputText>
                            </td>
                                
                            <td>
                                <h:inputText id="breedingHasAnimal_endDate_#{loop.index}" a:type="date" value="#{breedingHasAnimal.endDateString}">
                                    <f:ajax execute = "breedingHasAnimal_endDate_#{loop.index}" render = "breedingHasAnimal_endDate_#{loop.index}" />
                                </h:inputText>
                            </td>
                            
                            <td>
                                <div class="button" style="#{animalController.newBreedingHasAnimal.size() > 1 ? '' : 'display: none;'}">
                                    <h:commandButton id="removeBreedingHasAnimalButton" action="#{animalController.removeNewBreedingHasAnimal(breedingHasAnimal)}" styleClass="remove" value = "X">
                                        <f:ajax execute = "removeBreedingHasAnimalButton" render = "addAnimal" />
                                    </h:commandButton>
                                </div>
                            </td>
                            </tr>
                            </c:if>
                        </c:forEach>
                    </tbody>
                </table>
                <div class="button">
                    <h:commandButton id="addBreedingHasAnimalButton" action="#{animalController.addNewBreedingHasAnimal()}" styleClass="add" value = " + ">
                        <f:ajax execute = "addBreedingHasAnimalButton" render = "addAnimal" />
                    </h:commandButton>
                </div>
                
                <table>
                    <tbody>
                        <tr id="animal_add" class="animal_add">
                            <th colspan="5" style="border: solid thin;">Az egyed betegségei</th>
                        </tr>
                        <tr>
                            <th>Betegség neve:</th>
                            <th>Betegség kezdete:</th>
                            <th>Betegség megszünése:</th>
                            <th>Megjegyzés:</th>
                            <th></th>
                        </tr>
                            
                        <c:forEach items="#{animalController.newAnimalHasDiseases}" var="animalHasDiseases" varStatus="loop">
                            <tr>
                                <td colspan="1">
                                    <h:selectOneMenu id="animalDiseasesName_#{loop.index}" styleClass="selectonemenu" value="#{animalHasDiseases.animalDiseasesId}">
                                        <f:selectItem itemLabel = "Kérlek válassz!" />
                                        <f:selectItems value="#{animalController.allAnimalDiseases}" var="ad"
                                                       itemLabel="#{ad.name}" itemValue="#{ad.id}" />
                                        <f:ajax execute = "animalDiseasesName_#{loop.index}" render = "animalDiseasesName_#{loop.index}" />
                                    </h:selectOneMenu>
                                </td>
                                <td>
                                    <h:inputText id="startDate_#{loop.index}" a:type="date" value="#{animalHasDiseases.startDateString}">
                                        <f:ajax execute = "startDate_#{loop.index}" render = "startDate_#{loop.index}" />
                                    </h:inputText>
                                </td>
                                
                                <td>
                                    <h:inputText id="endDate_#{loop.index}" a:type="date" value="#{animalHasDiseases.endDateString}">
                                        <f:ajax execute = "endDate_#{loop.index}" render = "endDate_#{loop.index}" />
                                    </h:inputText>
                                </td>
                                
                                <td>
                                    <h:inputText id="comment_#{loop.index}" label="Helyrajzi szám" a:placeholder="Helyrajzi szám" required="false" value="#{animalHasDiseases.comment}">
                                        <f:ajax execute = "comment_#{loop.index}" render = "comment_#{loop.index}" />
                                    </h:inputText>
                                </td>
                                <td>
                                    <div class="button" style="#{animalController.newAnimalHasDiseases.size() > 1 ? '' : 'display: none;'}">
                                        <h:commandButton id="removeAnimalHasDiseasesButton" action="#{animalController.removeNewAnimalHasDiseases(animalHasDiseases)}" styleClass="remove" value = "X">
                                            <f:ajax execute = "removeAnimalHasDiseasesButton" render = "addAnimal" />
                                        </h:commandButton>
                                    </div>
                                </td>
                            </tr>
                        </c:forEach>
                    </tbody>
                </table>
                <div class="button">
                    <h:commandButton id="addAnimalHasDiseasesButton" action="#{animalController.addNewAnimalHasDiseases()}" styleClass="add" value = " + ">
                        <f:ajax execute = "addAnimalHasDiseasesButton" render = "addAnimal" />
                    </h:commandButton>
                </div>
                
                <div class="button">
                    <h:commandButton id="saveButton" type="submit" action="#{animalController.saveNewAnimal()}" styleClass="add" value = "Mentés" />
                </div>
            </h:form>
            </div>
        </div>
    </h:body>
</html>

