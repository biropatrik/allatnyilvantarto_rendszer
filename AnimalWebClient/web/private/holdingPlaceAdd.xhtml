<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <h:head>
        <title>Tartási hely felvétele</title>
    </h:head>
    <h:body>
        <link type="text/css" rel="stylesheet" href="../resources/css/animal.css?v=${applicationInfoBean.projectVersion}" />
        
        <div class="content">
            <f:metadata>
                <f:viewAction action="#{loginController.checkLogin('holdingPlaceAdd.xhtml',3)}" />
            </f:metadata>

            <ui:include src="navigationbar.xhtml" />
        
        <div class="content-block">
        <h:form id="addHoldingPlace">
                <table>
                    <tbody>
                            <tr id="holdingPlace_add" class="holdingPlace_add">
                                <th colspan="5" style="border: solid thin;">Tartási hely címe</th>
                            </tr>
                            <tr id="holdingPlace_add" class="holdingPlace_add" >
                                <td>Ország:</td>
                                <td colspan="4">
                                    <h:selectOneMenu styleClass="selectonemenu" value="#{holdingPlaceController.newHoldingPlace.countryIso2}">
                                        <f:selectItems value="#{holdingPlaceController.countries}" var="co"
                                                       itemLabel="#{co.name}" itemValue="#{co.iso2}" />
                                    </h:selectOneMenu>
                                </td>
                            </tr>
                            <tr id="holdingPlace_add" class="holdingPlace_add" >
                                <td>Megye:</td>
                                <td colspan="4">
                                    <h:selectOneMenu styleClass="selectonemenu" value="#{holdingPlaceController.newHoldingPlace.countyId}">
                                        <f:selectItems value="#{holdingPlaceController.counties}" var="cn"
                                                       itemLabel="#{cn.name}" itemValue="#{cn.id}" />
                                    </h:selectOneMenu>
                                </td>
                            </tr>
                            <tr id="holdingPlace_add" class="holdingPlace_add" >
                                <td>Irányítószám:</td>
                                <td colspan="1">
                                    <h:message for="postal_code" style="color:red" />
                                    <h:inputText id="postal_code" label="Irányítószám" a:placeholder="Irányítószám" required="false" value="#{holdingPlaceController.postal_code}">
                                        <f:ajax execute = "postal_code" render = "cities" />
                                    </h:inputText>
                                </td>
                            </tr>
                            <tr id="holdingPlace_add" class="holdingPlace_add" >
                                <td>Város:</td>
                                <td colspan="2">
                                    <h:selectOneMenu id="cities" styleClass="selectonemenu" value="#{holdingPlaceController.newHoldingPlace.cityId}">
                                        <f:selectItems value="#{holdingPlaceController.cities}" var="ci"
                                                       itemLabel="#{ci.name}" itemValue="#{ci.id}" />
                                    </h:selectOneMenu>
                                </td>
                            </tr>
                            <tr id="holdingPlace_add" class="holdingPlace_add" >
                                <td>Utca:</td>
                                <td colspan="1">
                                    <h:message for="street" style="color:red" />
                                    <h:inputText id="street" label="Utca" requiredMessage="A mező kitöltése kötelező!" a:placeholder="Utca" required="false" value="#{holdingPlaceController.newHoldingPlace.street}"/>
                                </td>
                            </tr>
                    </tbody>
                </table>
        </h:form>
        <h:form id="addHoldingPlaceHasSpecies">
                <table id="species_table" class="species">
                    <tbody>
                            <tr id="holdingPlace_add" class="holdingPlace_add" >
                                <th colspan="5" style="border: solid thin;">Tenyészetek tevékenységei</th>
                            </tr>
                        <c:forEach id="species_loop" items="#{holdingPlaceController.newHoldingPlaceHasSpecies}" var="species">
                            <tr id="species_row">
                                <td>
                                    <h:selectOneMenu styleClass="selectonemenu" value="#{species.speciesId}">
                                        <f:selectItems value="#{holdingPlaceController.allSpecies}" var="sp"
                                                       itemLabel="#{sp.name}" itemValue="#{sp.id}" />
                                    </h:selectOneMenu>
                                </td>
                                <td>Tevékenység kezdete:</td>
                                <td>
                                    <h:inputText a:type="date" value="#{species.startDateString}" />
                                </td>
                                <td>Hasznosítás:</td>
                                <td>
                                    <h:message for="utilization" style="color:red" />
                                    <h:inputText id="utilization" label="Hasznosítás" requiredMessage="A mező kitöltése kötelező!" a:placeholder="Hasznosítás" required="false" value="#{species.utilization}"/>
                                </td>
                            </tr>
                        </c:forEach>
                    </tbody>
                </table>
                <div class="button">
                    <h:commandButton id="addSpeciesRowButton" action="#{holdingPlaceController.addNewHoldingPlaceHasSpecies()}" styleClass="add" value = " + ">
                        <f:ajax execute = "addSpeciesRowButton" render = "addHoldingPlaceHasSpecies" />
                    </h:commandButton>
                </div>
                <div class="button">
                    <h:commandButton id="addButton" type="submit" action="#{holdingPlaceController.addNewHoldingPlaceHasSpecies()}" styleClass="add" value = " + ">
                    </h:commandButton>
                </div>
        </h:form>
        </div>
        </div>
        <script src="jquery-3.5.1.js"></script>
            <script>
                $('body').on('click', '.holdingPlace_species', function(){
                    var row = document.getElementById('species_row');
                    var clone = row.cloneNode(true);
                    $(".species").append(clone);
                  });
                
                $('body').on('click', '.holdingPlace_parcel_number', function(){
                    var row = document.getElementById('parcel_number_row');
                    var clone = row.cloneNode(true);
                    $(".parcel_numbers").append(clone);
                });
            </script>
    </h:body>
</html>

